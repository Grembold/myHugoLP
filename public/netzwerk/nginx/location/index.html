<!DOCTYPE html>
<html lang="de" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="generator" content="Hugo 0.26" />
    <meta name="description" content="Wie NginX entscheidet, welche location den Request bearbeiten soll.">


    <title>Server Unterodrner (locations) :: Meine Hugo Seite</title>
    <link rel="shortcut icon" href="../../../images/favicon.png" type="image/x-icon" />
    <link href="../../../css/nucleus.css" rel="stylesheet">
    <link href="../../../css/font-awesome.min.css" rel="stylesheet">
    <link href="../../../css/hybrid.css" rel="stylesheet">
    <link href="../../../css/featherlight.min.css" rel="stylesheet">
    <link href="../../../css/horsey.css" rel="stylesheet">
    
    <link href="../../../css/theme.css" rel="stylesheet">
    
    
    <link rel="stylesheet" href="../../../css/bootstrap.min.css">
    <script src="../../../js/jquery-2.x.min.js"></script>
    <style type="text/css">
      :root #header + #content > #left > #rlblock_left {
        display:none !important;
      }
    </style>

    

    

  </head>
  <body class="" data-url="/netzwerk/nginx/location/">
    <nav id="sidebar" class="showVisitedLinks">





<div class="highlightable">
  <div id="header-wrapper">
    <div id="header">
       
	<p>Blume Dokumentation</p>
 


    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fa fa-search"></i></label>
    <input data-search-input id="search-by" type="text" placeholder="">
    <span data-search-clear=""><i class="fa fa-close"></i></span>
</div>
<script type="text/javascript" src="../../../js/lunr.min.js"></script>
<script type="text/javascript" src="../../../js/horsey.js"></script>
<script type="text/javascript">
    var baseurl = "\/";
</script>
<script type="text/javascript" src="../../../js/search.js"></script>

    
  </div>

  
    <ul class="topics">
        
            <li data-nav-id="/" class="dd-item">
            <a href="../../../"><i class="fa fa-fw fa-home"></i></a>
            </li>
        
        
        
          
          


 
  
    
    <li data-nav-id="/netzwerk/" class="dd-item 
        parent
        
        
        ">
      <a href="../../../netzwerk/">
        <span>IT-Struktur</span>

        
        

          
            <i class="fa fa-angle-down fa-lg category-icon"></i>
          

        

        <i style="color:grey" class="fa fa-circle-thin read-icon"></i>
      </a>
      
        <ul>
          
          
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/netzwerk/fritzbox/" class="dd-item
     
      ">
        <a href="../../../netzwerk/fritzbox/">
        <span>FritzBox</span> 
        <i style="color:grey" class="fa fa-circle-thin read-icon"></i>
        </a></li>
     
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/netzwerk/nginx/" class="dd-item 
        parent
        
        
        ">
      <a href="../../../netzwerk/nginx/">
        <span>NginX Revers-Proxy</span>

        
        

          
            <i class="fa fa-angle-down fa-lg category-icon"></i>
          

        

        <i style="color:grey" class="fa fa-circle-thin read-icon"></i>
      </a>
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/netzwerk/nginx/letsencrypt/" class="dd-item
     
      ">
        <a href="../../../netzwerk/nginx/letsencrypt/">
        <span>Let´s Encrypt</span> 
        <i style="color:grey" class="fa fa-circle-thin read-icon"></i>
        </a></li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/netzwerk/nginx/servername/" class="dd-item
     
      ">
        <a href="../../../netzwerk/nginx/servername/">
        <span>Server Ports und Namen</span> 
        <i style="color:grey" class="fa fa-circle-thin read-icon"></i>
        </a></li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/netzwerk/nginx/location/" class="dd-item
     active
      ">
        <a href="../../../netzwerk/nginx/location/">
        <span>Server Unterodrner (locations)</span> 
        <i style="color:grey" class="fa fa-circle-thin read-icon"></i>
        </a></li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/netzwerk/nginx/proxy/" class="dd-item
     
      ">
        <a href="../../../netzwerk/nginx/proxy/">
        <span>HTTP Proxy</span> 
        <i style="color:grey" class="fa fa-circle-thin read-icon"></i>
        </a></li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/netzwerk/nginx/gitlab_domain_subfolder/" class="dd-item
     
      ">
        <a href="../../../netzwerk/nginx/gitlab_domain_subfolder/">
        <span>GitLab hinter nginx-Revers-Proxy</span> 
        <i style="color:grey" class="fa fa-circle-thin read-icon"></i>
        </a></li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/netzwerk/webserver/" class="dd-item 
        
        
        
        ">
      <a href="../../../netzwerk/webserver/">
        <span>WebServer</span>

        
        

        <i style="color:grey" class="fa fa-circle-thin read-icon"></i>
      </a>
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/docker/" class="dd-item 
        
        
        
        ">
      <a href="../../../docker/">
        <span>docker</span>

        
        

          
            <i class="fa fa-angle-right fa-lg category-icon"></i>
          

        

        <i style="color:grey" class="fa fa-circle-thin read-icon"></i>
      </a>
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/docker/rpi-hugo/" class="dd-item
     
      ">
        <a href="../../../docker/rpi-hugo/">
        <span>rpi-hugo</span> 
        <i style="color:grey" class="fa fa-circle-thin read-icon"></i>
        </a></li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/docker/certbot/" class="dd-item
     
      ">
        <a href="../../../docker/certbot/">
        <span>certbot-rpi</span> 
        <i style="color:grey" class="fa fa-circle-thin read-icon"></i>
        </a></li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/rpi/" class="dd-item 
        
        
        
        ">
      <a href="../../../rpi/">
        <span>Raspberry Pi</span>

        
        

          
            <i class="fa fa-angle-right fa-lg category-icon"></i>
          

        

        <i style="color:grey" class="fa fa-circle-thin read-icon"></i>
      </a>
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/rpi/configuration/" class="dd-item
     
      ">
        <a href="../../../rpi/configuration/">
        <span>Konfiguration</span> 
        <i style="color:grey" class="fa fa-circle-thin read-icon"></i>
        </a></li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
        

        
        <section id="shortcuts">
            
                <li class="" role="">
                    <h3>More</h3>
                    <a href="https://github.com/Grembold/myHugoLP"><i class='fa fa-github'></i> Github repo</a>
                    
                </li>
            
                <li class="" role="">
                    
                    <a href="../../../showcase/"><i class='fa fa-camera'></i> Showcases</a>
                    
                </li>
            
                <li class="" role="">
                    
                    <a href="https://gohugo.io/"><i class='fa fa-bookmark'></i> Hugo Documentation</a>
                    
                </li>
            
                <li class="" role="">
                    
                    <a href="http://docdock.netlify.com/"><i class='fa fa-bookmark'></i> Docdock Documentation</a>
                    
                </li>
            
                <li class="" role="">
                    
                    <a href="../../../impressum/"><i class='fa fa-bullhorn'></i> Impressum</a>
                    
                </li>
            
        </section>    
        
        
            <a class="" href="#" data-clear-history-toggle=""><i class="fa  fa-history"></i> </a>
        

        
    </ul>
    
     
    <section id="footer">
      
    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
        
          <div id="top-bar">
            
              
              
              
            <div id="top-github-link">
              <a class="github-link" href="https://github.com/Grembold/myHugoLP/edit/master/content/netzwerk/nginx/location.md" target="blank">
                <i class="fa fa-code-fork"></i>
                
              </a>
            </div>
              
            

            <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                <span id="sidebar-toggle-span">
                  <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                    <i class="fa fa-bars"></i>
                  </a>
                </span>
                <span id="toc-menu"><i class="fa fa-list-alt"></i></span>
                <span class="links">
                










 <a href='../../../'>DocDock für Blume</a> > <a href='../../../netzwerk/'>IT-Struktur</a> > <a href='../../../netzwerk/nginx/'>NginX Revers-Proxy</a> > Server Unterodrner (locations)

 

 

 

   
                </span>
            </div>
            <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
<ul>
<li>
<ul>
<li>
<ul>
<li><a href="#wie-nginx-etscheidet-welches-location-subdiractorie-den-request-bearbeiten-soll">Wie nginx etscheidet welches location/Subdiractorie den Request bearbeiten soll</a></li>
</ul></li>
<li><a href="#nginx-forum">nginx forum</a></li>
</ul></li>
</ul>
</nav>
    </div>
</div>

          </div>
        
        
        <div id="body-inner">
          
            <h1>Server Unterodrner (locations)</h1>
          






<h3 id="wie-nginx-etscheidet-welches-location-subdiractorie-den-request-bearbeiten-soll">Wie nginx etscheidet welches location/Subdiractorie den Request bearbeiten soll</h3>

<p>Schauen wir uns jetzt an, wie nginx einen Ord wählt, um eine Anfrage für eine typische, einfache PHP-Site zu verarbeiten:</p>

<pre><code>server {
    listen      80;
    server_name example.org www.example.org;
    root        /data/www;

    location / {
        index   index.html index.php;
    }

    location ~* \.(gif|jpg|png)$ {
        expires 30d;
    }

    location ~ \.php$ {
        fastcgi_pass  localhost:9000;
        fastcgi_param SCRIPT_FILENAME
                    $document_root$fastcgi_script_name;
        include       fastcgi_params;
    }
}
</code></pre>

<p>Nginx sucht zuerst nach dem spezifischsten Präfix-Standort, der von Literal-Strings unabhängig von der aufgeführten Reihenfolge gegeben wird. In der oben aufgeführten Konfiguration ist die einzige Präfix-Position <code>&quot;/&quot;</code> und da sie mit jeder Anfrage übereinstimmt, wird sie als <strong>letzter</strong> Ausweg verwendet. Anschließend überprüft nginx die Standorte, die durch den regulären Ausdruck in der Konfigurationsdatei anhand der aufgeführten Reihenfolge. Der erste passende Ausdruck stoppt die Suche und nginx wird diesen Ort verwenden. Wenn kein regulärer Ausdruck mit einer Anforderung übereinstimmt, verwendet nginx die aktuellste Präfix-Stelle, die früher gefunden wurde.</p>

<p>Beachten, dass <code>location</code> aller Typen nur den URI-Teil der Anforderungszeile ohne die Argumente testen. Dies geschieht, weil Argumente in der Abfragezeichenfolge auf mehrere Arten gegeben werden können, zum Beispiel:</p>

<pre><code>/index.php?user=john&amp;page=1
/index.php?page=1&amp;user=john
</code></pre>

<p>Außerdem kann jeder alles mögliche im Abfrage-String anfordern:</p>

<pre><code>/index.php?page=1&amp;something+else&amp;user=john
</code></pre>

<p>Schauen wir mal an, wie die Anfragen in der obigen Konfiguration verarbeitet werden.</p>

<ul>
<li>Eine Anforderung <code>&quot;/logo.gif&quot;</code> wird durch den Präfixort <code>&quot;/&quot;</code> zuerst und dann durch den regulären Ausdruck <code>&quot;\.(gif|jpg|png)$&quot;</code> abgeglichen, daher wird er von der letzteren Stelle abgewickelt. Mit der Anweisung <code>&quot;root /data/www&quot;</code> wird die Anforderung der Datei <code>/data/www/logo.gif</code> zugeordnet und die Datei wird an den Client gesendet.</li>
<li>Eine Anforderung <code>&quot;/index.php&quot;</code> wird auch durch den Präfixort <code>&quot;/&quot;</code> und dann durch den regulären Ausdruck <code>&quot;\.php$&quot;</code> abgeglichen. Deshalb wird es von diesem Standort abgewickelt und die Anforderung an einen FastCGI-Server übergeben, der auf <code>localhost:9000</code> hört. Die <a href="http://nginx.org/en/docs/http/ngx_http_fastcgi_module.html#fastcgi_param">Fastcgi_param</a>-Direktive setzt den FastCGI-Parameter <code>SCRIPT_FILENAME</code> auf <code>&quot;/data/www/index.php&quot;</code> und der FastCGI-Server führt die Datei aus. Die Variable <code>$document_root</code> ist gleich dem Wert der Root-Direktive und die Variable <code>$fastcgi_script_name</code> ist gleich der Request-URI, d.h. <code>&quot;/ index.php&quot;</code>.</li>
<li>Eine Anforderung <code>&quot;/about.html&quot;</code> wird nur durch den Präfixort <code>&quot;/&quot;</code> abgeglichen, daher wird er an dieser Stelle abgewickelt. Mit der Anweisung <code>&quot;root /data/www&quot;</code> wird die Anforderung der Datei <code>/data/www/about.html</code> zugeordnet und die Datei wird an den Client gesendet.</li>
<li>Die Handhabung einer Anfrage <code>&quot;/&quot;</code> ist komplexer. Es wird nur durch die Präfix-Position <code>&quot;/&quot;</code> abgeglichen, daher wird es von diesem Ort gehandhabt. Dann prüft die <a href="http://nginx.org/en/docs/http/ngx_http_index_module.html#index">index</a>-Direktive auf die Existenz von Indexdateien nach ihren Parametern und der <code>&quot;root /data/www&quot;</code>-Richtlinie.
Wenn die Datei <code>/data/www/index.html</code> nicht existiert und die Datei <code>/data/www/index.php</code> existiert, führt die Richtlinie eine interne Weiterleitung zu <code>&quot;/index.php&quot;</code> durch und nginx durchsucht die Standorte erneut als wenn die Anfrage von einem Kunden gesendet wurde. Wie wir vorher gesehen haben, wird die umgeleitete Anfrage schließlich vom FastCGI-Server abgewickelt.</li>
</ul>

<h2 id="nginx-forum">nginx forum</h2>

<p><a href="https://forum.nginx.org/read.php?18,266984">https://forum.nginx.org/read.php?18,266984</a></p>


<footer class=" footline" >
	
</footer>




        

      </div>
    </div>

    
 
    

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
        
        


        
            <a class="nav nav-prev" href="../../../netzwerk/nginx/servername/" title="Server Ports und Namen"> <i class="fa fa-chevron-left"></i></a>
        
        
            <a class="nav nav-next" href="../../../netzwerk/nginx/proxy/" title="HTTP Proxy" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
        
    </div>

    </section>
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>    

    <script src="../../../js/clipboard.min.js"></script>
<script src="../../../js/featherlight.min.js"></script>
<script src="../../../js/html5shiv-printshiv.min.js"></script>
<script src="../../../js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script src="../../../js/modernizr.custom.71422.js"></script>
<script src="../../../js/learn.js"></script>
<script src="../../../js/hugo-learn.js"></script>


<link href="../../../mermaid/mermaid.css" type="text/css" rel="stylesheet"/>
<script src="../../../mermaid/mermaid.js"></script>
<script>mermaid.initialize({startOnLoad:true});</script>
    

  </body>
</html>

