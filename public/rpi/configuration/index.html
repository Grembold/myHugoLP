<!DOCTYPE html>
<html lang="de" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="generator" content="Hugo 0.40.3" />
    <meta name="description" content="Grundkonfiguration des Pi">


    <title>Rpi einrichten :: Meine Hugo Seite</title>
    <link rel="shortcut icon" href="../../images/favicon.png" type="image/x-icon" />
    <link href="../../css/nucleus.css" rel="stylesheet">
    <link href="../../css/font-awesome.min.css" rel="stylesheet">
    <link href="../../css/hybrid.css" rel="stylesheet">
    <link href="../../css/featherlight.min.css" rel="stylesheet">
    <link href="../../css/horsey.css" rel="stylesheet">
    
    <link href="../../css/original.css" rel="stylesheet">
    
    
    <link rel="stylesheet" href="../../css/bootstrap.min.css">
    <script src="../../js/jquery-2.x.min.js"></script>
    <style type="text/css">
      :root #header + #content > #left > #rlblock_left {
        display:none !important;
      }
    </style>

    

    

  </head>
  <body class="" data-url="/rpi/configuration/">
    <nav id="sidebar" class="showVisitedLinks">





<div class="highlightable">
  <div id="header-wrapper">
    <div id="header">
       
	<p>Blume Dokumentation</p>
 


    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fa fa-search"></i></label>
    <input data-search-input id="search-by" type="text" placeholder="">
    <span data-search-clear=""><i class="fa fa-close"></i></span>
</div>
<script type="text/javascript" src="../../js/lunr.min.js"></script>
<script type="text/javascript" src="../../js/horsey.js"></script>
<script type="text/javascript">
    var baseurl = "\/";
</script>
<script type="text/javascript" src="../../js/search.js"></script>

    
  </div>

  
    <ul class="topics">
        
            <li data-nav-id="/" class="dd-item">
            <a href="../../"><i class="fa fa-fw fa-home"></i></a>
            </li>
        
        
        
          
          


 
  
    
    <li data-nav-id="/netzwerk/" class="dd-item 
        
        
        
        ">
      <a href="../../netzwerk/">
        <span>IT-Struktur</span>

        
        

          
            <i class="fa fa-angle-right fa-lg category-icon"></i>
          

        

        <i style="color:grey" class="fa fa-circle-thin read-icon"></i>
      </a>
      
        <ul>
          
          
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/netzwerk/fritzbox/" class="dd-item
     
      ">
        <a href="../../netzwerk/fritzbox/">
        <span>FritzBox</span> 
        <i style="color:grey" class="fa fa-circle-thin read-icon"></i>
        </a></li>
     
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/netzwerk/nginx/" class="dd-item 
        
        
        
        ">
      <a href="../../netzwerk/nginx/">
        <span>Revers-Proxy</span>

        
        

          
            <i class="fa fa-angle-right fa-lg category-icon"></i>
          

        

        <i style="color:grey" class="fa fa-circle-thin read-icon"></i>
      </a>
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/netzwerk/nginx/letsencrypt/" class="dd-item
     
      ">
        <a href="../../netzwerk/nginx/letsencrypt/">
        <span>LetÂ´s Encrypt</span> 
        <i style="color:grey" class="fa fa-circle-thin read-icon"></i>
        </a></li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/netzwerk/nginx/servername/" class="dd-item
     
      ">
        <a href="../../netzwerk/nginx/servername/">
        <span>Server Ports und Namen</span> 
        <i style="color:grey" class="fa fa-circle-thin read-icon"></i>
        </a></li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/netzwerk/nginx/location/" class="dd-item
     
      ">
        <a href="../../netzwerk/nginx/location/">
        <span>Server Unterodrner (locations)</span> 
        <i style="color:grey" class="fa fa-circle-thin read-icon"></i>
        </a></li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/netzwerk/nginx/proxy/" class="dd-item
     
      ">
        <a href="../../netzwerk/nginx/proxy/">
        <span>HTTP Proxy</span> 
        <i style="color:grey" class="fa fa-circle-thin read-icon"></i>
        </a></li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/netzwerk/nginx/gitlab_domain_subfolder/" class="dd-item
     
      ">
        <a href="../../netzwerk/nginx/gitlab_domain_subfolder/">
        <span>GitLab hinter nginx-Revers-Proxy</span> 
        <i style="color:grey" class="fa fa-circle-thin read-icon"></i>
        </a></li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/netzwerk/webserver/" class="dd-item 
        
        
        
        ">
      <a href="../../netzwerk/webserver/">
        <span>WebServer</span>

        
        

        <i style="color:grey" class="fa fa-circle-thin read-icon"></i>
      </a>
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/docker/" class="dd-item 
        
        
        
        ">
      <a href="../../docker/">
        <span>docker</span>

        
        

          
            <i class="fa fa-angle-right fa-lg category-icon"></i>
          

        

        <i style="color:grey" class="fa fa-circle-thin read-icon"></i>
      </a>
      
        <ul>
          
          
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/docker/rpi_install_docker/" class="dd-item
     
      ">
        <a href="../../docker/rpi_install_docker/">
        <span>Installation</span> 
        <i style="color:grey" class="fa fa-circle-thin read-icon"></i>
        </a></li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/docker/rpi_install_compose/" class="dd-item
     
      ">
        <a href="../../docker/rpi_install_compose/">
        <span>Installation docker-compose</span> 
        <i style="color:grey" class="fa fa-circle-thin read-icon"></i>
        </a></li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/docker/swarm/" class="dd-item
     
      ">
        <a href="../../docker/swarm/">
        <span>swarm</span> 
        <i style="color:grey" class="fa fa-circle-thin read-icon"></i>
        </a></li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/docker/cluster/" class="dd-item
     
      ">
        <a href="../../docker/cluster/">
        <span>cluster</span> 
        <i style="color:grey" class="fa fa-circle-thin read-icon"></i>
        </a></li>
     
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/docker/container/" class="dd-item 
        
        
        
        ">
      <a href="../../docker/container/">
        <span>container</span>

        
        

          
            <i class="fa fa-angle-right fa-lg category-icon"></i>
          

        

        <i style="color:grey" class="fa fa-circle-thin read-icon"></i>
      </a>
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/docker/container/rpi-hugo/" class="dd-item
     
      ">
        <a href="../../docker/container/rpi-hugo/">
        <span>rpi-hugo</span> 
        <i style="color:grey" class="fa fa-circle-thin read-icon"></i>
        </a></li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/docker/container/certbot/" class="dd-item
     
      ">
        <a href="../../docker/container/certbot/">
        <span>certbot-rpi</span> 
        <i style="color:grey" class="fa fa-circle-thin read-icon"></i>
        </a></li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/docker/container/pi-hole/" class="dd-item
     
      ">
        <a href="../../docker/container/pi-hole/">
        <span>pi-hole</span> 
        <i style="color:grey" class="fa fa-circle-thin read-icon"></i>
        </a></li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/rpi/" class="dd-item 
        parent
        
        
        ">
      <a href="../../rpi/">
        <span>Raspberry Pi</span>

        
        

          
            <i class="fa fa-angle-down fa-lg category-icon"></i>
          

        

        <i style="color:grey" class="fa fa-circle-thin read-icon"></i>
      </a>
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/rpi/configuration/" class="dd-item
     active
      ">
        <a href="../../rpi/configuration/">
        <span>Rpi einrichten</span> 
        <i style="color:grey" class="fa fa-circle-thin read-icon"></i>
        </a></li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/rpi/ssh_key/" class="dd-item
     
      ">
        <a href="../../rpi/ssh_key/">
        <span>SSH und keys</span> 
        <i style="color:grey" class="fa fa-circle-thin read-icon"></i>
        </a></li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/rpi/rpimonitor/" class="dd-item
     
      ">
        <a href="../../rpi/rpimonitor/">
        <span>RPi-Monitor</span> 
        <i style="color:grey" class="fa fa-circle-thin read-icon"></i>
        </a></li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
        

        
        <section id="shortcuts">
            
                <li class="" role="">
                    <h3>More</h3>
                    <a href="https://github.com/Grembold/myHugoLP"><i class='fa fa-github'></i> Github repo</a>
                    
                </li>
            
                <li class="" role="">
                    
                    <a href="http://docdock.netlify.com/"><i class='fa fa-bookmark'></i> Docdock Documentation</a>
                    
                </li>
            
                <li class="" role="">
                    
                    <a href="../../impressum/"><i class='fa fa-bullhorn'></i> Impressum</a>
                    
                </li>
            
                <li class="" role="">
                    
                    <a href="../../links/"><i class='fa fa-external-link-square'></i> Links</a>
                    
                </li>
            
        </section>    
        
        
            <a class="" href="#" data-clear-history-toggle=""><i class="fa  fa-history"></i> </a>
        

        
    </ul>
    
     
    <section id="footer">
      
    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
        
          <div id="top-bar">
            
              
              
              
            <div id="top-github-link">
              <a class="github-link" href="https://github.com/Grembold/myHugoLP/edit/master/content/rpi/configuration.md" target="blank">
                <i class="fa fa-code-fork"></i>
                
              </a>
            </div>
              
            

            <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                <span id="sidebar-toggle-span">
                  <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                    <i class="fa fa-bars"></i>
                  </a>
                </span>
                <span id="toc-menu"><i class="fa fa-list-alt"></i></span>
                <span class="links">
                







 <a href='../../'>DocDock fÃ¼r Blume</a> > <a href='../../rpi/'>Raspberry Pi</a> > Rpi einrichten

 

 

   
                </span>
            </div>
            <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
<ul>
<li><a href="#grundkonfiguration">Grundkonfiguration</a>
<ul>
<li><a href="#teil-2-ssh-schlÃ¼ssel-neu-erstellen">Teil 2 - SSH-SchlÃ¼ssel neu erstellen</a></li>
<li><a href="#teil-3-software-aktualisierung">Teil 3 - Software-Aktualisierung</a></li>
<li><a href="#teil-4-rpi-firmware-linux-kernel-aktualisieren">Teil 4 - RPI Firmware / Linux kernel aktualisieren</a></li>
<li><a href="#teil-5-swap-deaktivieren">Teil 5 - Swap deaktivieren</a></li>
<li><a href="#teil-6-logging-in-arbeitsspeicher-verschieben">Teil 6 - Logging in Arbeitsspeicher verschieben</a></li>
</ul></li>
</ul>
</nav>
    </div>
</div>

          </div>
        
        
        <div id="body-inner">
          
            <h1>Rpi einrichten</h1>
          






<h1 id="grundkonfiguration">Grundkonfiguration</h1>

<p>Der erste Schritt fÃ¼r jeden Pi ist ersteinmal das Raspbian image auf eine SD-Karte zu spielen.
Da es hierzu unzÃ¤lige anleitungen gibt, sei es hier nur erwÃ¤hnt und abgehakt.</p>

<ul class="task-list">
<li><label><input type="checkbox" checked disabled class="task-list-item"> Betriebssystem auf SD-Karte spielen</label></li>
</ul>

<p>Der zweite Schritt ist die raspi-config Erste einstellungen vornehmen</p>

<pre><code>sudo raspi-config
</code></pre>

<ul class="task-list">
<li><label><input type="checkbox" checked disabled class="task-list-item"> Passwort des users pi Ã¤ndern

<ul>
<li><code>2 change user password</code></li>
</ul></label></li>
<li><label><input type="checkbox" checked disabled class="task-list-item"> Dateisystem erweitern

<ul>
<li><code>9 Advanced Options</code></li>
<li><code>A1 Expand filesstem</code></li>
</ul></label></li>
<li><label><input type="checkbox" checked disabled class="task-list-item"> Boot-Option auswÃ¤hlen

<ul>
<li><code>3 Boot Options</code></li>
<li><code>B1 Console</code></li>
</ul></label></li>
<li><label><input type="checkbox" checked disabled class="task-list-item"> Sprach- und Zeiteinstellungen

<ul>
<li><code>#4 Internationalisation Options</code></li>
<li><code>I1 Change Local</code></li>
<li><code>[x] de_DE.UTF-8 UTF-8 aktivieren</code></li>
<li><code>[ ] en_EN... deaktivieren</code></li>
<li><code>de_DE als default</code></li>
<li><code>I2 Change Timezone</code></li>
<li><code>Europe -&gt; Berlin</code></li>
</ul></label></li>
<li><label><input type="checkbox" checked disabled class="task-list-item"> Hostname Ã¤ndern

<ul>
<li><code>9 Advanced Options</code></li>
<li><code>A2 Hostname</code></li>
</ul></label></li>
</ul>

<p>Zum Schluss lÃ¤sstig, aber wichtig, der reboot.</p>

<pre><code>sudo reboot
</code></pre>

<h2 id="teil-2-ssh-schlÃ¼ssel-neu-erstellen">Teil 2 - SSH-SchlÃ¼ssel neu erstellen</h2>

<p>Da wir ein frisches Image verwendet haben und dies alle im Internet verwenden, ist auch der SSH fingerprint bei alles gleich. Also lassen wir diesen einmal neu erstellen</p>

<pre><code>:::shell
sudo rm /etc/ssh/ssh_host_*
sudo dpkg-reconfigure openssh-server
sudo service ssh restart
</code></pre>

<h2 id="teil-3-software-aktualisierung">Teil 3 - Software-Aktualisierung</h2>

<pre><code>:::shell
sudo apt update
sudo apt upgrade
sudo reboot
</code></pre>

<h2 id="teil-4-rpi-firmware-linux-kernel-aktualisieren">Teil 4 - RPI Firmware / Linux kernel aktualisieren</h2>

<p>Anzeige der aktuellen Linux version
    uname -a
Anzeige der Hardware
    sudo cat /proc/device-tree/model
Update</p>

<pre><code>:::shell
sudo rpi-update
sudo reboot
</code></pre>

<p>Sollte von jessy auf stretch gewechselt werden, so mÃ¼ssen die Paketquellen entsprechend angepasst werden. <a href="https://www.elektronik-kompendium.de/sites/raspberry-pi/2204031.htm">Siehe hier</a></p>

<pre><code>sudo nano /etc/apt/sources.list
    deb http://raspbian.raspberrypi.org/raspbian/ stretch main contrib non-free rpi
</code></pre>

<h2 id="teil-5-swap-deaktivieren">Teil 5 - Swap deaktivieren</h2>

<p><a href="https://www.elektronik-kompendium.de/sites/raspberry-pi/2002131.htm">Swapping beim Raspberry pi deaktivieren</a>
&gt; Speziell beim Raspberry Pi ist Swapping eigentlich kontraproduktiv. Swapping erhÃ¶ht die Anzahl der Schreibzugriffe auf ein Speichermedium, auf dem sich der Swap-Speicher befindet. Das Betriebssystem und der Swap-Speicher befindet sich beim Raspberry Pi auf einer SD-Card, die nur eine begrenzte Anzahl an Schreibzugriffen vertrÃ¤gt, bevor einzelne Speicherzellen kaputt gehen. SD-Cards eignen sich Ã¼berhaupt nicht zum Swapping.
&gt; Ein weiterer Grund auf Swapping zu verzichten ist die begrenzte Geschwindigkeit der SD-Card. Das macht das Swapping auf dem Raspberry Pi auch noch langsam.
&gt; Auch SSDs verkraften nur eine begrenzte Anzahl von Schreibzyklen. Auf eine SSD oder SD-Card zu swappen reduziert deren Lebensdauer und kann zu vorzeitigem Datenverlust fÃ¼hren</p>

<p>Zuerst stoppen des Swapping-Dienst</p>

<pre><code>sudo service dphys-swapfile stop
</code></pre>

<p>AnschlieÃend prÃ¼fen wir, ob das Swapping abgeschaltet ist:</p>

<pre><code>free -h
</code></pre>

<p>Wenn die Zeile &ldquo;Swap&rdquo; nur noch &ldquo;0&rdquo;-Werte aufweist, kÃ¶nnen wir den Swap-Dienst deaktivieren.</p>

<pre><code>sudo systemctl disable dphys-swapfile
</code></pre>

<h2 id="teil-6-logging-in-arbeitsspeicher-verschieben">Teil 6 - Logging in Arbeitsspeicher verschieben</h2>

<p>HÃ¤ufiges schreiben auf die SD-Karte kann dies vorzeitig zertÃ¶ren und im schliommsten fall die Installation unbrauchbar machen. Dies ist mir auch schon einige male in den Jahren passiert. Das Raspberry scheint noch normal zu funktionieren und die Dienste und Programme laufen noch, doch lÃ¤sst die SD-Karte keine schreibenden Zugriff mehr zu und alle Ãnderungen sind nach einem Neustart wieder futsch.
Ein Teil im Raspberry der regelmÃ¤Ãig auf die SD-Karte schreibt sind die Dienste (Daemons). Alle abschalten wÃ¤re eine MÃ¶glichkeit, doch dann hat der Pi gar keine gunktion mehr :-).
Eine andere MÃ¶glichkeit ist das Logging-Verzeichniss auf einen anderen DatentrÃ¤ger auszulagern. Ein Speicher der sehr viele schreib-Zugriff vertrÃ¤gt ist der RAM und mit einer virtuellen Festplatte im RAM lÃ¤sst dich das Logging-Verzeichnis dorthin verschieben.
Nun sind die Daten im RAM bekanntlicher weise nach einem Absturz/Neustart verloren und nun wÃ¤ren auch alle Logs verloren. Dies mÃ¶chte man natÃ¼rlich nicht und so erstellt man einen Dienst der regelmÃ¤ssig und beim ordendlichen herunterfahren/neustart alle Logs aus dem Arbeitsspeicher wieder auf die SD-Karte schreibt. Hierdurch wird der schreibzugriff aud die SD-Karte erheblich reduziert.</p>

<p>{%alert%}
In einigen Blogs und Seiten wird das Tool <code>ramlog</code> verwednet. Ich musste aber feststellen, dasss es mit der Debian Version Stretch nicht mehr funktioniert. Also <code>ramlog</code>und <code>strechts</code> sind nicht kompatiebel.{%alert%}</p>

<p>Am einfachsten war fÃ¼r mich das tool <a href="https://github.com/azlux/log2ram"><code>log2ram</code></a>, dessen isntallation auf dem Raspberry ich hier auffÃ¼hre.</p>

<pre><code>curl -Lo log2ram.tar.gz https://github.com/azlux/log2ram/archive/master.tar.gz
tar xf log2ram.tar.gz
cd log2ram-master
chmod +x install.sh &amp;&amp; sudo ./install.sh
cd ..
rm -r log2ram-master

sudo reboot
</code></pre>

<p>Quelle: <a href="https://github.com/azlux/log2ram">https://github.com/azlux/log2ram</a></p>


<footer class=" footline" >
	
</footer>




        

      </div>
    </div>

    
 
    

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
        
        


        
            <a class="nav nav-prev" href="../../rpi/" title="Raspberry Pi"> <i class="fa fa-chevron-left"></i></a>
        
        
            <a class="nav nav-next" href="../../rpi/ssh_key/" title="SSH und keys" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
        
    </div>

    </section>
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>    

    <script src="../../js/clipboard.min.js"></script>
<script src="../../js/featherlight.min.js"></script>
<script src="../../js/html5shiv-printshiv.min.js"></script>
<script src="../../js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script src="../../js/modernizr.custom.71422.js"></script>
<script src="../../js/learn.js"></script>
<script src="../../js/hugo-learn.js"></script>


<link href="../../mermaid/mermaid.css" type="text/css" rel="stylesheet"/>
<script src="../../mermaid/mermaid.js"></script>
<script>mermaid.initialize({startOnLoad:true});</script>
    

  </body>
</html>

